<%- include('templates/headerAuthenticated') %>

<style>
    /* Loading Spinner Styles */
    #loadingSpinner {
      position: fixed;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.9);
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column; /* Added */
      z-index: 1000;
    }
  
    .spinner {
      border: 8px solid #f3f3f3;
      border-top: 8px solid #3498db;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      animation: spin 1s linear infinite;
    }
  
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  
    /* Hide main content initially */
    #mainContent {
      display: none;
    }
  
    #loading{
      margin-top: 20px; /* Adjust margin as needed */
    }
  </style>
  

<script>
  function initMap() {
    // Your existing map initialization code here
  }

  window.onload = function() {
    setTimeout(() => {
      document.getElementById('loadingSpinner').style.display = 'none';
      document.getElementById('mainContent').style.display = 'block';
    }, 10000);
  };
</script>

<div id="loadingSpinner">
    <div class="spinner"></div>
    <div id="loading">
      <h1>Loading...</h1>
    </div>
  </div>

<div id="mainContent">
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Drones Near You</h5>
    </div>
    <div id="mapContainer">
      <div id="map" class="rounded"></div>
    </div>
  </div>

  <div class="d-grid gap-2 px-3">
    <a href="/locationList" class="btn btn-primary btn-lg" type="button">Location List</a>
    <a href="/droneList" class="btn btn-secondary btn-lg" type="button">Drone List</a>
  </div>
</div>



<%- include('templates/footerAuthenticatedUser') %>
<script src="https://maps.googleapis.com/maps/api/js?key=<%= maps_api %>&callback=initMap" async defer></script>
<script src="/maps.js" defer></script>
